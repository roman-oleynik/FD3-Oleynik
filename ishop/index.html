<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
    <style>
        td {
            border: 1px solid #000;
        }
        img {
            height: 150px;
        }
    </style>
</head>
<body>

	
	<div id="container"></div>
	

    <script src="https://unpkg.com/react@15/dist/react.js"></script> 
    <script src="https://unpkg.com/react-dom@15/dist/react-dom.js"></script> 
    <script>
        var marketTitle = "Магазин фруктов, ягод и животных"
        var productsList = [
            {name: "apple", code:1, price: 25, url: "apple.jpg", left: 2000},
            {name: "pear", code:2, price: 35, url: "pear.jpg", left: 1000},
            {name: "pineapple", code:3, price: 55, url: "pineapple.jpg", left: 200},
            {name: "grape", code:4, price: 38, url: "grape.jpg", left: 1300},
            {name: "cat", code:5, price: 135, url: "cat.jpg", left: 20},
            {name: "dog", code:6, price: 25, url: "dog.jpg", left: 80}
        ];
        var component = React.createClass({
            displayName: 'IMarket',
            propTypes: {
                title: React.PropTypes.string.isRequired,
                products: React.PropTypes.arrayOf(
                    React.PropTypes.shape({
                        code: React.PropTypes.number.isRequired,
                        price: React.PropTypes.number.isRequired,
                        url: React.PropTypes.string.isRequired,
                        left: React.PropTypes.number.isRequired,
                    })
                ),
            },
            render: function() {
                var table = React.DOM.table({className: "Table"}, 
                React.DOM.tr({className: 'TableHeader'},
                     React.DOM.td({className:'TableHeaderName'}, "Name"),
                     React.DOM.td({className:'TableHeaderPrice'}, "Price"),
                     React.DOM.td({className:'TableHeaderPicture'}, 'Picture'),
                     React.DOM.td({className:'TableHeaderLeft'}, 'Left'),
                ),
                this.props.products.map(x => 
                        React.DOM.tr({key: x.code, className: 'TableItem'},
                            React.DOM.td({className:'TableItemName'}, x.name),
                            React.DOM.td({className:'TableItemPrice'}, x.price),
                            React.DOM.td({className:'TableItemPicture'}, 
                                React.DOM.img({src: x.url})
                            ),
                            React.DOM.td({className:'TableItemLeft'}, x.left),
                        ),
                    
                ),
                //вместо блока кода с map хотел вставить переменную productsCode ниже
                //но таблица через переменную не отрисовывается, несмотря на то,
                //что productsCode отсюда доступна
                //в чем причина?
                );

                // var productsCode = this.props.products.map(x => 
                //         React.DOM.tr({key: x.code, className: 'TableItem'},
                //             React.DOM.td({className:'TableItemName'}, x.name),
                //             React.DOM.td({className:'TableItemPrice'}, x.price),
                //             React.DOM.td({className:'TableItemPicture'}, 
                //                 React.DOM.img({src: x.url})
                //             ),
                //             React.DOM.td({className:'TableItemLeft'}, x.left),
                //         ),
                    
                // );
                return React.DOM.div({className: "MarketBlock"},
                React.DOM.h1({className: "MarketTitle"}, this.props.title),
                React.DOM.div({className: "productsList"}, table),
                );
                
            }
        });
        ReactDOM.render(
            React.createElement(component, {title:marketTitle, products:productsList}),
            document.getElementById('container')
        );

       
    </script>

</body>
</html>